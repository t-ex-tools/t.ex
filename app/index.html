<!doctype html>
<html lang="en" class="h-100">
  <head>
    <link rel="stylesheet" href="./libraries/bootstrap/bootstrap.min.css"/>
    <link rel="stylesheet" href="./libraries/bootstrap-vue/bootstrap-vue.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
      .tab-text {max-width: 200px; float: left; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;}
      .remove-tab-btn {color: darkgray}
      .remove-tab-btn:hover {color: red}
    </style>
  </head>
  <body class="h-100">
    <div id="app" class="h-100">

      <b-navbar toggleable="lg" type="dark" variant="primary">
        <b-navbar-brand href="#">T.EX - T.ransparency EX.tension</b-navbar-brand>
        
        <b-navbar-nav class="ml-auto">
          <b-button variant="primary" v-b-tooltip.hover title="Settings" class="p-1" @click="openSettings()">
            <b-icon icon="gear" variant="light"></b-icon>
          </b-button>
        </b-navbar-nav>
      </b-navbar>

      <tab-bar
        v-bind:groups="groups"
        v-bind:selected-index="selectedIndex"
        @tabs-changed="updateSelectedIndex"
        @tab-removed="groupAtIndexRemoved">
      </tab-bar>

      <b-container fluid class="h-100">
        <b-row class="h-100">

          <b-col cols="2" class="border-right pt-3">
            <navigation
              v-bind:groups="groups"
              v-bind:selected-index="selectedIndex"
              v-bind:data-tag="dataTag"
              @routes-changed="updateRoutes">
            </navigation>
          </b-col>

          <b-col cols="8" class="pt-3">
            <router-view
              v-bind:requests="requests" 
              v-bind:js="js"
              v-bind:data-tag="dataTag">
            </router-view>
          </b-col>

          <b-col cols="2" class="border-left pt-3">
            <sidebar
              v-bind:requests="requests" 
              v-bind:js="js"
              v-on:trigger-download="download">
            </sidebar>
          </b-col>
          
        </b-row>
      </b-container>

      <loading-modal ref="LoadingModal" v-bind:loaded="alreadyLoaded + windowSize" v-bind:total="numberOfChunks"></loading-modal>
      <init-modal ref="InitModal" @update-limit="updateLimit"></init-modal>
      <settings-modal ref="SettingsModal" @create-password="createPassword"></settings-modal>
    </div>

    <script src="./libraries/jsencrypt/jsencrypt.min.js"></script>
    <script src="./libraries/sjcl/sjcl.js"></script>
    <script src="./libraries/SparkMD5/spark-md5.min.js"></script>

    <script src="./libraries/vue.js/vue.min.js"></script>
    <script src="./libraries/vue.js/vue-router.js"></script>
    <script src="./libraries/bootstrap-vue/bootstrap-vue.js"></script>
    <script src="./libraries/bootstrap-vue/bootstrap-vue-icons.min.js"></script>
    
    <script src="./libraries/GoogleCharts/loader.js"></script>
    <script type="module" src="index.js"></script>
  </body>
</html>
